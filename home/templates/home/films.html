{% extends "base.html" %}
{% load static %}

{% block title %}Films - Film Reviews{% endblock %}
{% block extra_css %}
  <link rel="stylesheet" type="text/css" href="{% static 'css/style_films.css' %}">
{% endblock %}
{% block extra_js %}
  {{ block.super }}
  <script src="{% static 'js/films.js' %}" defer></script>
{% endblock %}

{% block content %}
<div class="films-section">
  <div class="list-of-films">
    <h2>List of films</h2>
  </div>
  <div class="films-list">
    <div class="movie-thumbnails">
      {% for movie in movies %}
      <div class="film-card">
          <a href="{% url 'movie_description' movie.id %}">
          <img src="{{ movie.image.url }}" alt="{{ movie.name }}">
          </a>

          <div class="btn-wrapper">
          <a href="{% url 'movie_description' movie.id %}" class="btn-description">Description</a>
          <a href="{% url 'movie_reviews' movie.id %}" class="btn-review">Review</a>
          </div>
      </div>
      {% endfor %}

      <!-- Add New movie card with modal trigger -->
      <div class="film-card add-new" id="openAddMovieModal">
        <div class="add-placeholder"><span>ADD NEW MOVIE</span></div>
      </div>

      <!-- Modal Form -->
      <div id="addMovieModal" class="modal" style="display:none;">
        <div class="modal-content">
          <span class="close" aria-label="Close">&times;</span>
          {% include "home/partials/_movie_form.html" %}
        </div>
      </div>

      {% if messages %}
      <div class="flash">
        {% for m in messages %}<p>{{ m }}</p>{% endfor %}
      </div>
      {% endif %}
    </div>
  </div>

  {% if movies.paginator.num_pages > 1 %}
  <div class="pagination">
    <span class="step-links">
      {% if movies.has_previous %}
        <a class="btn-page" href="?page=1">&laquo; first</a>
        <a class="btn-page" href="?page={{ movies.previous_page_number }}">previous</a>
      {% endif %}
      <span class="current badge-page">
        Page {{ movies.number }} of {{ movies.paginator.num_pages }}
      </span>
      {% if movies.has_next %}
        <a class="btn-page" href="?page={{ movies.next_page_number }}">next</a>
        <a class="btn-page" href="?page={{ movies.paginator.num_pages }}">last &raquo;</a>
      {% endif %}
    </span>
  </div>
  {% endif %}
</div>
{% endblock %}
